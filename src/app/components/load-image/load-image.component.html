<head>
  <title>Обработка изображения</title>
</head>
<div class="split left" style="background: white; width: 55%;">
  <div class="section" style="height: 13%; ">
    <div class="pos">
      <label for="file-upload" class="btn btn-info mb-2" style="margin-right: 20px">
        Обзор...
      </label>
      <input id="file-upload" type="file" (change)="selectFile($event)"/>
      <label *ngIf="file_name != ''" style="font-size: 20px"> Загруженный файл: {{ file_name }} </label>
    </div>
  </div>
  <div class="section border-gradient border-for-image-div">
    <img [src]="imagePath" style="height: 100%; max-width: 100%;  display:block; margin:auto;">
  </div>
  <div class="section" style="height: 10%">
    <button
      type="submit"
      class="btn btn-info mb-2 text-center edit-button"
      [disabled]="!selectedFiles" (click)="loadImage('message_modal')"
      style="min-width: 10%; margin-right: 50px"
    >
      Загрузить
    </button>
  </div>
</div>
<div class="split right" style="width: 40%">
  <div class="pos">
    <h3>Результат обработки:</h3>
    <input type="text" readonly style="width: 100%;" class="diagnosis" value="{{diagnosys}}">
    <br><br><br>
    <div class="form-group">
      <label for="doctor_selector">Выберите пациента из списка:</label>
      <br>
      <select class="form-control" [(ngModel)]="selected" (change)="valueChange($event)" id="doctor_selector"
              name="doctor_selector">
        <option *ngFor="let type of patientsList"
                [value]="type" [selected]="type == selected">
          {{ type }}
        </option>
      </select>
    </div>
    <label>Диагноз: </label> <br>
    <textarea name="text" wrap="soft" maxlength="9970" style="width: 100%; height: 350px; overflow:hidden; resize:none; overflow-y: scroll;" [(ngModel)]="custom_diagnosys"></textarea>
  </div>
  <div>
    <button
      type="submit"
      class="btn btn-info mb-2 text-center edit-button"
      name="save"
      [disabled]="!diagnosys"
      (click)="saveDiagnosys('message_modal')"
      style="min-width: 10%; margin-right: 50px"
    >
      Сохранить
    </button>
  </div>
</div>

<jw-modal id="message_modal">
  <div class="text-center">
    <label style="margin-top: 10px"> {{ message }} </label>
    <br>
    <button
      type="submit"
      class="btn btn-outline-info mb-2 text-center"
      name="save"
      (click)="closeModal('message_modal');"
      style="width: 140px; margin-left: 20px"
    >
      Ок
    </button>
  </div>
</jw-modal>
